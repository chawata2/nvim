# Neovim Configuration Cheat Sheet

## 基本操作

### キーマップ
| キー | 機能 | 説明 |
|-----|------|------|
| `<Space>` | Leader キー | 多くのコマンドのプレフィックス |
| `jk` | ESC | インサートモードから抜ける |
| `x` | Delete without copy | 文字削除（ヤンクしない） |
| `<Esc><Esc>` | Clear highlights | 検索ハイライトをクリア |

## ファイル検索・操作 (Telescope)

| キー | 機能 | 説明 |
|-----|------|------|
| `<leader>ff` | Find files | ファイル検索 |
| `<leader>fg` | Live grep | 文字列検索 |
| `<leader>fb` | Buffers | バッファ一覧 |
| `<leader>fh` | Help tags | ヘルプ検索 |

### Telescope 内の操作
- `<C-n>` / `<C-p>`: 上下移動
- `<CR>`: 選択
- `<C-c>`: キャンセル

## 文字入力・編集

### 自動補完 (nvim-cmp)
| キー | 機能 |
|-----|------|
| `<C-p>` | 前の候補 |
| `<C-n>` | 次の候補 |
| `<C-l>` | 補完メニュー表示 |
| `<C-e>` | 補完中止 |
| `<CR>` | 補完確定 |
| `<Tab>` | 次の候補 / スニペット展開 |
| `<S-Tab>` | 前の候補 |

### 囲み文字操作 (nvim-surround)
| 操作 | 機能 | 例 |
|-----|------|-----|
| `ys{motion}{char}` | 囲み文字追加 | `ysiw"` → word を " で囲む |
| `ds{char}` | 囲み文字削除 | `ds"` → " を削除 |
| `cs{old}{new}` | 囲み文字変更 | `cs"'` → " を ' に変更 |

### 括弧自動補完 (nvim-autopairs)
- `(`, `{`, `[`, `"`, `'` などを入力すると自動で閉じ括弧が挿入される

## 移動・ナビゲーション

### Quick Scope (f/t 移動)
- `f`, `F`, `t`, `T` でジャンプ時に候補文字がハイライトされる
- 緑色: 最初の候補
- 黄色: 2番目の候補

## LSP・言語サポート

### 利用可能な言語
- **Lua**: lua_ls が設定済み

### LSP 機能（標準）
| キー | 機能 |
|-----|------|
| `gd` | 定義へジャンプ |
| `gr` | 参照一覧 |
| `K` | ホバー情報 |
| `<C-k>` | シグネチャヘルプ |

## GitHub Copilot

- 自動的にコード補完候補を提供
- nvim-cmp と統合済み
- 全ファイルタイプで有効

## Git 操作 (vim-fugitive)

### 基本コマンド
| コマンド | 機能 | 説明 |
|---------|------|------|
| `:Git` / `:G` | Git コマンド実行 | git status と同等 |
| `:Git status` | ステータス確認 | 変更されたファイル一覧 |
| `:Git add %` | ファイルをステージング | 現在のファイルを追加 |
| `:Git add .` | 全ファイルをステージング | すべての変更をステージング |
| `:Git commit` | コミット | コミットメッセージ入力画面 |
| `:Git rebase -i HEAD~3` | インタラクティブリベース | 直近3コミットを編集 |

### status 画面での操作
| キー | 機能 | 説明 |
|-----|------|------|
| `s` | Stage | ファイルをステージングに追加 |
| `u` | Unstage | ファイルをステージングから削除 |
| `=` | Diff表示 | ファイルの差分を表示 |
| `cc` | Commit | コミット作成 |
| `<CR>` | ファイルを開く | カーソル下のファイルを開く |
| `o` | 分割して開く | 水平分割でファイルを開く |
| `gO` | タブで開く | 新しいタブでファイルを開く |

### diff 表示
- `:Git diff` : 作業ディレクトリとステージングエリアの差分
- `:Git diff --staged` : ステージングエリアとHEADの差分
- `:Git diff HEAD` : 作業ディレクトリとHEADの差分

## フォーマッター (Conform)

### 対応言語
- **Lua**: stylua

### 使用方法
- 保存時に自動フォーマット実行

## 外観・UI

### カラーテーマ
- **Nightfox** を使用

### ハイライト機能
- **Rainbow Delimiters**: 括弧を色分け表示
- **Treesitter**: シンタックスハイライト

## ファイル管理 (Oil)

### 基本操作
| コマンド/キー | 機能 | 説明 |
|-------------|------|------|
| `:Oil` | Oil を開く | 現在のディレクトリでファイラーを開く |
| `:Oil {dir}` | 指定ディレクトリで開く | 特定のディレクトリでファイラーを開く |
| `<CR>` | ファイル/ディレクトリを開く | ファイルの場合は編集、ディレクトリの場合は移動 |
| `-` | 親ディレクトリに移動 | 一つ上のディレクトリに移動 |
| `g?` | ヘルプ表示 | キーマップ一覧を表示 |

### ファイル/ディレクトリ操作
| キー | 機能 | 説明 |
|-----|------|------|
| `a` | 新規作成 | ファイル/ディレクトリを作成 |
| `d` | 削除 | ファイル/ディレクトリを削除 |
| `r` | 名前変更 | ファイル/ディレクトリの名前を変更 |
| `c` | コピー | ファイル/ディレクトリをコピー |
| `x` | カット | ファイル/ディレクトリをカット |
| `p` | ペースト | カット/コピーしたファイルを貼り付け |

### 表示・ナビゲーション
| キー | 機能 | 説明 |
|-----|------|------|
| `g.` | 隠しファイル表示切替 | dotfile の表示/非表示 |
| `gs` | ソート切替 | ファイルのソート方法を変更 |
| `gx` | 外部アプリで開く | システムのデフォルトアプリで開く |
| `<C-s>` | 水平分割で開く | ファイルを水平分割で開く |
| `<C-v>` | 垂直分割で開く | ファイルを垂直分割で開く |
| `<C-t>` | タブで開く | ファイルを新しいタブで開く |

### 編集・保存
- Oil はバッファとして動作するため、通常の Vim 操作（`dd`、`yy`、`p` など）が使用可能
- 変更を保存するには `:w` を実行
- 変更を破棄するには `:q!` を実行

## QuickFix

- QuickFix ウィンドウで編集可能（Quicker プラグイン）

## 設定ファイル構造

```
~/.config/nvim/
├── init.lua                    # エントリーポイント
├── lua/
│   ├── core/                   # 基本設定
│   │   ├── bootstrap.lua       # lazy.nvim のブートストラップ
│   │   ├── options.lua         # Neovim オプション
│   │   └── keymaps.lua         # キーマップ
│   └── plugins/                # プラグイン設定 (1 plugin = 1 file)
│       ├── nightfox.lua        # カラーテーマ
│       ├── telescope.lua       # ファジーファインダー
│       ├── nvim-cmp.lua        # 補完エンジン
│       ├── copilot.lua         # GitHub Copilot
│       └── ...                 # その他のプラグイン
└── README.md                   # このファイル
```

## カスタマイズ

### 新しいプラグインの追加
1. `lua/plugins/` に新しい `.lua` ファイルを作成
2. プラグイン設定を記述
3. Neovim を再起動

### 既存設定の変更
- **オプション**: `lua/core/options.lua`
- **キーマップ**: `lua/core/keymaps.lua`  
- **個別プラグイン**: `lua/plugins/{plugin-name}.lua`

## トラブルシューティング

### プラグインが読み込まれない
```vim
:Lazy reload {plugin-name}
```

### LSP が動作しない
```vim
:LspInfo
```

### 設定の再読み込み
```vim
:source ~/.config/nvim/init.lua
```